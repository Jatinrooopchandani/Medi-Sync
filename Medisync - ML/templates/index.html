<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="index.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!--JQuery-->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.min.js" integrity="sha256-AlTido85uXPlSyyaZNsjJXeCs07eSv3r43kyCVc8ChI=" crossorigin="anonymous"></script>
    
    <title>AI Help</title>
  </head>
  <style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f3f3f3;
    color: #333;
}

/* Header styling */
header {
    background-color: #2e8b57;
    color: white;
    padding: 15px 20px;
    display: flex;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.header-content {
    width: 100%;
    max-width: 1200px;
    display: flex;
    align-items: center;
    justify-content: center;
   
}

.logo-container {
    display: flex;
    align-items: center;
}

.logo {
    width: 50px;
    height: 50px;
    margin-right: 10px;
}

nav {
    justify-content: center;
    display: flex;
    gap: 25px;
}

nav a {
    color: white;
    text-decoration: none;
    font-weight: bold;
    padding: 10px;
    transition: color 0.3s;
}

nav a:hover {
    color: #45a049;
}
/* Footer styling */
footer {
    background-color: #2e8b57;
    color: white;
    text-align: center;
    padding: 20px;
    font-size: 14px;
}

footer p {
    margin: 5px 0;
}

/* Media Queries for Responsiveness */
@media (max-width: 768px) {
    .header-content {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    nav {
        flex-direction: column;
        gap: 20px;
    }

    .logo {
        width: 40px;
        height: 40px;
    }

    #home h2 {
        font-size: 32px;
    }

    #home p {
        font-size: 18px;
    }

    .cta-btn {
        padding: 12px 25px;
    }
}

@media (max-width: 480px) {
    #home {
        padding: 100px 15px;
    }

    .overlay {
        padding: 30px;
    }

    #home h2 {
        font-size: 28px;
    }

    #home p {
        font-size: 16px;
    }

    .cta-btn {
        padding: 10px 20px;
    }


}
.ui-helper-hidden-accessible { display:none; }
body {
  background-image: url("https://i.postimg.cc/j504TtdH/aibg.png");

  /* Center and scale the image nicely */
  background-size: 100vw 100vh;
  background-repeat: no-repeat;
}
h1 {
    text-align: center; /* Center align the text */
    margin-top: 20px; /* Space below the header section */
    color: #00ffcc; /* Bright color for dark background */
    font-size: 2.5em; /* Adjust size as needed */
    font-weight: bold;
}



.ui-autocomplete {
    z-index: 1000; /* Ensures the dropdown is above other elements */
    max-height: 200px; /* Limit the height of the dropdown */
    overflow-y: auto; /* Add a scrollbar if necessary */
    background-color: #fff; /* White background for the dropdown */
    border: 1px solid #ccc; /* Border around the dropdown */
    border-radius: 4px; /* Rounded corners */
}

.ui-menu-item {
    color: #000; /* Black text for unselected items */
    background-color: #fff; /* White background for unselected items */
    padding: 8px 10px; /* Spacing for dropdown items */
    cursor: pointer; /* Pointer cursor for items */
}
.ui-menu-item:hover,
.ui-state-active {
    background-color: #000; /* Black background for active/focused item */
    color: #fff; /* White text for active/focused item */
}
  </style>
  <body>
    
    <header>
        <div class="logo-container">
            <a href="http://localhost/medisync/"><img src="https://i.postimg.cc/mZ9K7gHs/image.png" alt = "Medisync logo" class="logo"></a>
          </div>
        <div class="header-content">
          
          <nav>
            <a href="http://localhost/medisync/">Home</a>
            <a href="http://localhost/medisync/choice.php">Ask AI</a>
            <a href="http://localhost/medisync/shop.php">Shop</a>
            <a href="http://localhost/medisync/about-us.php">About Us</a>
            <a href="http://localhost/medisync/ContactUs.php">Contact Us</a>
          </nav>
        </div>
      </header>
    <h1>AI HELP</h1>
    <div class="container my-4 mt-4" 
     style="background: rgba(0, 0, 0, 0.3); 
            color: white; 
            border-radius: 15px; 
            padding: 40px;">
        <form action="/predict" method="post">
            <div class="form-group">
                <label for="symptoms">Select Symptoms:</label>
                <input type="text" class="form-control" id="symptoms" name="symptoms" placeholder="enter symptoms">
    
            </div>
            <br>
           
            <br>
    
            <!-- Display the transcribed text here -->
            <div name="mysysms" id="transcription"></div>
    
            {% if message %}
            <p>{{ message }}</p>
            {% endif %}
            <br>
    
            <button type="submit" class="btn btn-danger btn-lg" style="margin-left: 40%; width: 15%; padding: 14px; margin-bottom: 5px;">Predict</button>
        </form>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    
  
  {% if predicted_disease %}

<!-- Results -->
<h1 class="text-center my-4 mt-4">Our AI System Results</h1>
<div class="container">

    <div class="result-container">
        <!-- Buttons to toggle display -->
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#diseaseModal" style="padding:4px;  margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#F39334;color:black;">Disease</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#descriptionModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#268AF3 ;color:black;">Description</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#precautionModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#F371F9 ;color:black;">Precaution</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#medicationsModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px;border-radius:5px; background:#F8576F ;color:black;">Medications</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#workoutsModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#99F741 ;color:black;">Workouts</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#dietsModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#E5E23D;color:black;">Diets</button>
    </div>
</div>

{% endif %}

<!-- Disease Modal -->
    <div class="modal fade" id="diseaseModal" tabindex="-1" aria-labelledby="diseaseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;"> <!-- Set header background color inline -->
                    <h5 class="modal-title" id="diseaseModalLabel">Predicted Disease</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="background-color: rgb(207, 119, 119)"> <!-- Set modal body background color inline -->
                    <p>{{ predicted_disease }}</p>
                </div>
            </div>
        </div>
    </div>


    <!-- Description Modal -->
    <div class="modal fade" id="descriptionModal" tabindex="-1" aria-labelledby="descriptionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="descriptionModalLabel">Description</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>{{ dis_desc }}</p>
                </div>
            </div>
        </div>
    </div>

<!-- Precaution Modal -->
    <div class="modal fade" id="precautionModal" tabindex="-1" aria-labelledby="precautionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="precautionModalLabel">Precaution</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in dis_pre %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>




    <!-- Medications Modal -->
    <div class="modal fade" id="medicationsModal" tabindex="-1" aria-labelledby="medicationsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="medicationsModalLabel">Medications</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in dis_med %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Workouts Modal -->
    <div class="modal fade" id="workoutsModal" tabindex="-1" aria-labelledby="workoutsModalLabel" aria-hidden="true">
        <div class="modal-dialog" >
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="workoutsModalLabel">Workouts</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in dis_wrk %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Diets Modal -->
    <div class="modal fade" id="dietsModal" tabindex="-1" aria-labelledby="dietsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="dietsModalLabel">Diets</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in dis_dt %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            $("#symptoms")
                .on("keydown", function (event) {
                    // Allow navigation in the autocomplete dropdown with Up/Down arrow keys
                    if (event.keyCode === $.ui.keyCode.UP || event.keyCode === $.ui.keyCode.DOWN) {
                        if ($(this).autocomplete("instance").menu.active) {
                            return; // Let the autocomplete handle the navigation
                        }
                    }
                    // Prevent default behavior if Tab is pressed while a suggestion is focused
                    if (event.keyCode === $.ui.keyCode.TAB &&
                        $(this).autocomplete("instance").menu.active) {
                        event.preventDefault();
                    }
                })
                .autocomplete({
                    source: function (request, response) {
                        // Get the last symptom for autocomplete suggestions
                        const term = extractLast(request.term);
                        $.ajax({
                            url: "/symptoms_list",
                            dataType: "json",
                            data: { term: term },
                            success: function (data) {
                                response(data);
                            },
                            error: function () {
                                console.error("Failed to fetch symptoms list");
                            },
                        });
                    },
                    focus: function (event, ui) {
                        // Prevent value from being updated on focus
                        return false;
                    },
                    select: function (event, ui) {
                        // Add the selected symptom to the input field
                        const terms = split(this.value);
                        // Remove the current input
                        terms.pop();
                        // Add the selected item
                        terms.push(ui.item.value);
                        // Add an empty placeholder for the next symptom
                        terms.push("");
                        this.value = terms.join(", ");
                        return false; // Prevent default behavior
                    },
                    minLength: 1
                });
    
            // Utility function to split input based on commas
            function split(val) {
                return val.split(/,\s*/);
            }
    
            // Utility function to extract the last entered symptom
            function extractLast(term) {
                return split(term).pop();
            }
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

</body>
</html>